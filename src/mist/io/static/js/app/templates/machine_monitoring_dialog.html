{{#if view.machine.hasMonitoring}}
    <a href="#"
        class="monitoring-button"
        data-role="button"
        data-icon="delete"
        data-theme="a"
        {{action "enableMonitoringClick" target="view"}}>Disable</a>
{{else}}
    <a href="#"
        class="monitoring-button"
        data-role="button"
        data-icon="star"
        data-theme="b"
        {{action "enableMonitoringClick" target="view"}}>Enable</a>
{{/if}}

<div data-role="popup" id="monitoring-dialog" class="mist-dialog" data-overlay-theme="a">
    <div data-role="header">
        <h1>Disable monitoring</h1>
    </div>
    <div data-role="content" data-theme="b">
        <div id="monitoring-enabled">
            <span>Are you sure you wish to disable monitoring for {{name}}?</span>

            {{#unless hasKey}}
                <p>The collectd daemon can't be disabled automactically because there is no key pair set.</p>
                <p>To do it manually run the following commands:</p>
                <pre>chmod -x /etc/init.d/collectd &amp;&amp; killall -9 collectd</pre>
            {{/unless}}

            <div class="btn-full ok-cancel" data-role="controlgroup" data-type="horizontal">
                <button data-theme="c" id="button-back-enabled">Back</button>
                <button data-theme="b" id="button-disable-monitoring">Disable</button>
            </div>
        </div>
        <div id="monitoring-disabled">
            <div id="enable-monitoring-dialog">
                <div>Are you sure you wish to enable monitoring for {{name}}?</div>

                {{#unless hasKey}}
                    <p>The collectd daemon can't be installed automatically because there is no key pair set.</p>
                    <p>You will have to configure it manually by following the instructions after pressing enable.</p>
                {{/unless}}

                <div class="btn-full ok-cancel" data-role="controlgroup" data-type="horizontal">
                    <button data-theme="c" id="button-back-disabled">Back</button>
                    <button data-theme="b" id="button-enable-monitoring">Enable</button>
                </div>
            </div>
            <div id="plan-dialog">
                <div id="plan-text"><span></span></div>
                <div class="btn-full ok-cancel" data-role="controlgroup" data-type="horizontal">
                    <button data-theme="c" id="button-back-plan" {{action "closePlanDialog" target="view"}}>Back</button>
                    <button data-theme="b" id="button-enable-trial" {{action "openTrialDialog" target="view"}}>Enable Trial</button>
                    <button data-theme="b" id="button-purchase" {{action "clickedPurchaseDialog" target="view"}}>Purchase Plan</button>
                </div>
            </div>
        </div>
    </div>
</div>
