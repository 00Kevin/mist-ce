<div data-role="page" id="machines" data-theme="c">

    <div data-role="header">

        <a href="#home"
            data-icon="home"
            data-direction="reverse"
            class="ui-btn-left">Home</a>

        <h1>Machines</h1>

        <a href="#dialog-providers"
            data-rel="dialog"
            data-role="button"
            data-iconpos="notext"
            data-transition="slidedown"
            data-icon="check"
            {{bindAttr class="Mist.backendsController.state :state-providers"}}>Backends</a>

    </div>

    <div data-role="content">

        {{view Mist.Select
            data-native-menu="false"
            name="select-machines"
            id="mist-select-machines"
            contentBinding="Mist.selectMachinesController.content"
            selectionBinding="Mist.selectMachinesController.selection"
            optionLabelPath="content.name"
            optionValuePath="content.id"
            prompt="Select Machines"
        }}

        <a href="#dialog-add"
        id="mist-create-machine"
        data-rel="dialog"
        data-theme="b"
        data-inline="true"
        data-transition="slidedown"
        data-role="button"
        data-icon="plus" >Create</a>

        <ul id="machines-list"
        data-role="listview"
        data-filter="true"
        data-inset="true"
        data-theme="c"
        data-filter-placeholder="Filter machines...">
            {{#each Mist.backendsController}}
                {{#each this.machines}}
                    {{view Mist.MachineListView machineBinding="this"}}
                {{/each}}
            {{/each}}
        </ul>

        <div class="bottom-padding"></div>

    </div>

    <div class="machines-footer" data-role="footer" data-theme="a">

        <div class="actions" data-role="controlgroup" data-type="horizontal">
            <a href="#dialog-shell"
            class="action-links"
            id="machines-button-shell"
            data-role="button"
            data-icon="gear"
            data-rel="popup"
            data-transition="slideup"
            {{bindAttr class="disabledShellClass"}}>Shell</a>

            <a href="#dialog-tags"
            class="action-links"
            id="machines-button-tags"
            data-role="button"
            data-icon="grid"
            data-rel="popup"
            data-transition="slideup"
            {{bindAttr class="disabledTagClass"}}>Tag</a>

            <a href="#dialog-power"
            class="action-links"
            id="machines-button-power"
            data-role="button"
            data-icon="mist-power"
            data-rel="popup"
            data-transition="slideup"
            {{bindAttr class="disabledPowerClass"}}>Power</a>
        </div>

    </div>
</div>
