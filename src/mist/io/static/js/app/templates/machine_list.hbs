<div id="machine-list-page" data-role="page" class="ui-page-active">

    <div data-role="header" data-theme="a">
        <!-- Page header -->
        <div class="ui-header ui-bar-a">
            <div class="header-grid">
                <div class="ui-grid-b">
                    <div class="ui-block-a">
                        <a href="#" class="responsive-button ui-btn icon-prev ui-alt-icon ui-caps
                        ui-btn-icon-left ui-corner-all">Home</a>
                    </div>

                    <div class="ui-block-b">
                        <h1 class="ui-title">MIST.IO</h1>
                    </div>

                    <div class="ui-block-c">
                        <div class="user-menu">
                            {{view "userMenu"}}
                        </div>
                    </div>
                </div><!-- /grid-b -->
            </div>
        </div>
    </div>

    <div data-role="content">
        <div class="ui-grid-b machines-header ui-shadow">
            <div class="ui-block-a">
                <a id="select-machines-btn"
                   class="responsive-button ui-btn-icon-right"
                   data-role="button"
                   data-icon="carat-d"
                   {{action "selectClicked" target="view"}}>Select</a>
            </div>
            <div class="ui-block-b"></div>
            <div class="ui-block-c">
                <a id="create-machine-btn"
                   class="responsive-button ui-btn ui-btn-add ui-btn-d ui-icon-plus
                        ui-btn-icon-left ui-caps"
                   {{action "createClicked" target="view"}}>Create Machine</a>
           </div>
        </div><!-- /grid-b -->

        <ul id="machines"
            data-role="listview"
            data-inset="true"
            data-filter="true"
            data-filter-placeholder="Filter machines"
            data-theme="c"
            class="checkbox-list ui-shadow">
            {{#each Mist.backendsController.content}}
                {{#if this.enabled}}
                    {{#each this.machines.content}}
                        {{view "machineListItem"
                            machineBinding="this"
                            class="checkbox-link"}}
                    {{/each}}
                {{/if}}
            {{/each}}
        </ul>

        <div class="mid-padding"></div>

    </div>

    {{view "dialog"}}

    {{view "machineAdd"}}

    {{view "machineTags"}}

    {{view "machineShell"}}

    {{view "machinePower" position="#machines-power-btn"}}

    <div id="select-machines-popup" data-role="popup" data-overlay-theme="b" data-transition="flip" data-position-to="#select-machines-btn">
        <ul data-role="listview">
            <li data-icon="false">
                <a {{action "selectionModeClicked" "all" target="view"}}>All</a>
            </li>
            <li data-icon="false">
                <a {{action "selectionModeClicked" "none" target="view"}}>None</a>
            </li>
            {{#each Mist.backendsController.content}}
                {{#if this.enabled}}
                    <li data-icon="false">
                        <a {{action "selectionModeClicked" this.title target="view"}}>
                            {{this.title}}
                        </a>
                    </li>
                {{/if}}
            {{/each}}
        </ul>
    </div>

    <div class="tri-action-footer" data-role="footer" data-theme="b">
        <table><tbody><tr><td>
            <a id="machines-tags-btn" class="ui-btn ui-icon-grid ui-btn-icon-left ui-shadow ui-corner-all"
                {{action "tagsClicked" target="view"}}>Tags</a>
        </td><td>
            {{#if view.selectedMachine.isWindows}}
                <a id="single-machine-shell-btn"
                    target="_blank"
                    {{bind-attr href="view.selectedMachine.rdpURL" class="view.selectedMachine.canConnect::ui-state-disabled
                        :ui-btn
                        :ui-btn-icon-left
                        :ui-icon-gear"}}>Connect</a>
            {{else}}
                <a id="machines-shell-btn" {{bind-attr class="view.selectedMachine.canConnect::ui-state-disabled
                    :ui-btn
                    :ui-btn-icon-left
                    :ui-icon-gear"}}
                    {{action "shellClicked" target="view"}}>Shell</a>
            {{/if}}

        </td><td>
            <a id="machines-power-btn" data-role="button" data-icon="bars" {{action "powerClicked" target="view"}}>Actions</a>
        </td></tr></tbody></table>
    </div>

</div>
