<a href="#"
    id="mist-create-machine"
    class="add-button"
    data-theme="b"
    data-role="button"
    data-icon="plus"
    data-iconpos="right"
    {{action openMachineAddDialog target="view"}}>Create</a>

<div id="dialog-add" class="mist-dialog" data-role="panel" data-position="right" data-display="overlay" data-theme="b">
    <div data-role="header">
        <h1>Create Machine</h1>
    </div>
    <div data-role="content">
        <label for="create-machine-name">1. Name:</label>
        {{view Mist.TextField
            valueBinding="Mist.machineAddController.newMachineName"
            name="create-machine-name"
            id="create-machine-name"}}

        <label for="createmachine-select-provider">2. Provider:</label>
        <div class="select-provider-collapsible" data-role="collapsible" data-iconpos="right" data-corners="true"
            data-collapsed-icon="arrow-d" data-expanded-icon="arrow-u">
            <h2>Select Provider</h2>
            <ul class="select-listmenu" data-role="listview" data-divider-theme="d" data-corners="true">
                {{#each Mist.backendsController}}
                <li data-icon="false" data-corners="true">
                    <a href="#" title="{{unbound this.provider}}">{{this.title}}</a>
                </li>
                {{/each}}
            </ul>
        </div>
        {{!view Mist.Select contentBinding="Mist.backendsController"
            optionLabelPath="content.title"
            optionValuePath="content.provider"
            prompt="Select Provider"
            selectionBinding="Mist.machineAddController.newMachineBackend"
            class="create-select"
            data-theme="c"
            data-icon="check"
            id="createmachine-select-provider"
            name="createmachine-select-provider"}}

        <label for="createmachine-select-size">3. Size:</label>
        <div class="select-size-collapsible ui-disabled" data-role="collapsible" data-iconpos="right" data-corners="true"
            data-collapsed-icon="arrow-d" data-expanded-icon="arrow-u">
            <h2>Select Size</h2>
            <ul class="select-listmenu" data-role="listview" data-divider-theme="d" data-corners="true">
                {{#each Mist.machineAddController.newMachineBackend.sizes}}
                <li data-icon="false" data-corners="true">
                    <a href="#" title="{{unbound this.id}}">{{this.name}}</a>
                </li>
                {{/each}}
            </ul>
        </div>
        {{!view Mist.Select contentBinding="Mist.machineAddController.newMachineBackend.sizes"
            optionLabelPath="content.name"
            optionValuePath="content.id"
            prompt="Select Size"
            selectionBinding="Mist.machineAddController.newMachineSize"
            class="create-select"
            data-theme="c"
            data-icon="check"
            id="createmachine-select-size"
            name="createmachine-select-size"}}
            
        <label for="createmachine-select-image">4. Image:</label>
        <div class="select-image-collapsible ui-disabled" data-role="collapsible" data-iconpos="right" data-corners="true"
            data-collapsed-icon="arrow-d" data-expanded-icon="arrow-u">
            <h2>Select Image</h2>
            <ul class="select-listmenu" data-role="listview" data-divider-theme="d" data-corners="true">
                {{#each Mist.machineAddController.newMachineBackend.images}}
                <li data-icon="false" data-corners="true">
                    <a href="#" title="{{unbound this.id}}">{{this.name}}</a>
                </li>
                {{/each}}
            </ul>
        </div>
        {{!view Mist.Select contentBinding="Mist.machineAddController.newMachineBackend.images"
            optionLabelPath="content.name"
            optionValuePath="content.id"
            prompt="Select Image"
            selectionBinding="Mist.machineAddController.newMachineImage"
            class="create-select"
            data-theme="c"
            data-icon="check"
            id="createmachine-select-image"
            name="createmachine-select-image"}}

        <label for="createmachine-select-location">5. Location:</label>
        <div class="select-location-collapsible ui-disabled" data-role="collapsible" data-iconpos="right" data-corners="true"
            data-collapsed-icon="arrow-d" data-expanded-icon="arrow-u">
            <h2>Select Location</h2>
            <ul class="select-listmenu" data-role="listview" data-divider-theme="d" data-corners="true">
                {{#each Mist.machineAddController.newMachineBackend.locations}}
                <li data-icon="false" data-corners="true">
                    <a href="#" title="{{unbound this.id}}">{{this.name}}</a>
                </li>
                {{/each}}
            </ul>
        </div>        
        {{!view Mist.Select contentBinding="Mist.machineAddController.newMachineBackend.locations"
            optionLabelPath="content.name"
            optionValuePath="content.id"
            prompt="Select Location"
            selectionBinding="Mist.machineAddController.newMachineLocation"
            class="create-select"
            data-theme="c"
            data-icon="check"
            id="createmachine-select-location"
            name="createmachine-select-location"}}

        <label for="createmachine-select-key">6. Key:</label>
        <div class="select-image-collapsible ui-disabled" data-role="collapsible" data-iconpos="right" data-corners="true"
            data-collapsed-icon="arrow-d" data-expanded-icon="arrow-u">
            <h2>Select Key</h2>
            <ul class="select-listmenu" data-role="listview" data-divider-theme="d" data-corners="true">
                {{#each Mist.keysController}}
                <li data-icon="false" data-corners="true">
                    <a href="#" title="{{unbound this.name}}">{{this.name}}</a>
                </li>
                {{/each}}
            </ul>
        </div>        
        {{!view Mist.Select contentBinding="Mist.keysController"
            optionLabelPath="content.name"
            optionValuePath="content.name"
            prompt="Select Key"
            selectionBinding="Mist.machineAddController.newMachineKey"
            class="create-select"
            data-theme="c"
            data-icon="check"
            id="createmachine-select-key"
            name="createmachine-select-key"}}

        <label for="create-machine-script">7.Script:</label>
        {{view Mist.TextField
            valueBinding="Mist.machineAddController.newMachineScript"
            name="create-machine-script"
            id="create-machine-script"}}

        <!--div class="cost">Cost: {{Mist.machineAddController.newMachineCost}}</div-->

        <div class="btn-full ok-cancel" data-role="controlgroup" data-type="horizontal">
            <button id="create-machine-cancel" data-theme="c" {{action backClicked target="view"}}>Back</button>
            <button id="create-machine-ok" data-theme="b" {{action newMachineClicked target="view"}}>Launch!</button>
        </div>
    </div>
</div>
